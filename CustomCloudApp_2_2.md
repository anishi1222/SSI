# カスタム・クラウド・アプリケーション作成の準備

SSIを使って、チームメンバーと共有できる独自のクラウド・アプリケーション定義を作成する前に、いくつかの事前作業を行います。

- [データの収集](#データの収集)
- [ベースURLの基準](#ベースURLの基準)
- [作業の理解](#作業の理解)

## データの収集

SSIを拡張するため、クラウド・アプリケーションのAPIを使用して、クラウド・アプリケーション定義を作成します。SSIのクラウド・アプリケーション定義で使用するクラウド・アプリケーションの情報が必要です。無事に作成できるよう、クラウド・アプリケーション定義を作成する前に情報を収集してください。

- SSIでサポートするクラウド・アプリケーションの開発者アカウントをクラウド・アプリケーションに作成
- SSIでサポートするクラウド・アプリケーションのAPIドキュメントを読む
- 認証情報、クライアントID、クライアントシークレット、APIキー、ベースURLといったアカウント情報を収集

## ベースURLの基準

ベースURLはクラウド・アプリケーション定義に必要で、クラウド・アプリケーション・インスタンスでオーバーライドできます。この値を使って、クラウド・アプリケーションの相対パスを解決します。ベースURLは、以下の条件を満たさないようにする必要があります。

- localhost
- 127.0.0.0 - 127.255.255.255 (127.0.0.0/8) に属する全てのIPアドレス
- 0.0.0.0
- Broadcast IP - 255.255.255.255
- Multicast IP- 224.0.0.0 to 224.0.0.255
- Class CのプライベートIPアドレス (https://www.arin.net/knowledge/address_filters.html)

## 作業の理解

カスタム・クラウド・アプリケーション定義とカスタム・クラウド・アプリケーション・インスタンスを開発する際には、以下の手順で作業することを推奨します。プライベートフローは、開発サイクルの一環で実行します。開発フローを複数回してクラウド・アプリケーションを改良できます。作成が完了したら公開フローを実行します。

手順|作業内容
----|----
定義の作成 > 検証 > 下書きとして保存 | クラウド・アプリケーション定義の公開前に、下書きとして保存し、後で公開できます。
定義の作成 > 検証 > アクティブ化 | アクティブ化された定義を使用してプライベートクラウド・アプリケーション・インスタンスを作成できます。
定義の更新 > 検証 > 下書きとして保存 | 更新済みバージョンをテスト可能なドラフトとして保存できます。

公開フローを使って、作成したクラウド・アプリケーション定義やクラウド・アプリケーション・インスタンスを他者に見えるようにします。

手順|作業内容
----|----
定義の作成 > 検証 > 公開 | 定義作成のための最も一般的な作業手順で、公開済みクラウド・アプリケーション定義は、全ユーザーが閲覧可能です。
定義の作成 > 検証 > アクティブ化 > インスタンスの作成 > レシピの作成 > 公開 | 公開済みクラウド・アプリケーション・インスタンスは、全ユーザーが閲覧できます。
定義の更新 > 検証 > アクティブ化 > インスタンスの作成 > 公開 | クラウド・アプリケーション・インスタンスは更新できますが、アクティブなレシピに影響があります。
定義の更新 > 検証 > アクティブ化 > インスタンスの作成 > 公開 > レシピの作成 | クラウド・アプリケーション定義は更新できますが、アクティブなレシピに影響があります。
